


| Проблема                                             | Симптомы                                                                    | Диагностика                                                                             | Решение                                                                            |
| ---------------------------------------------------- | --------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| Высокая загрузка сети (`Network Saturation`)         | Медленная передача данных, таймауты приложений, высокий `drop` в `ifconfig` | `iftop`, `nethogs`, `ip -s link show` — определить процесс или хост, создающий нагрузку | Оптимизация приложения, настройка QoS, балансировка нагрузки, масштабирование сети |
| Потеря пакетов (`Packet Loss`)                       | Таймауты, прерывистые соединения                                            | `ping`, `mtr`, `ethtool`, `dmesg` — выявить ошибки сети или интерфейса                  | Проверить кабель, драйверы, увеличить ARP-кэш, заменить порт/кабель                |
| Сервис не слушает порт                               | `Connection refused`, нет доступа извне                                     | `ss -tlnp`, `iptables`, `firewall-cmd`, `getenforce`                                    | Разрешить порт в фаерволе, настроить SELinux, перезапустить сервис                 |
| Исчерпание файловых дескрипторов                     | `Too many open files` в логах                                               | `ulimit -n`, `/proc/<PID>/limits`, `lsof`                                               | Увеличить лимиты в `limits.conf`, `sysctl.conf`, перезапустить процесс             |
| Заполнение inodes при свободном месте                | `No space left on device`, `df -h` показывает свободное место               | `df -i`, `find / -xdev -printf '%h\n'                                                   | sort                                                                               |
| Высокий CPU (`sys` или `iowait`)                     | Медленная система, высокие `%wa` и `%sy`                                    | `top`, `iotop`, `pidstat`, `strace`                                                     | Оптимизация запросов, обновление драйверов, ограничение фоновых процессов          |
| Ошибочная маршрутизация                              | Сервер не может достичь сети, пинг не проходит                              | `ip route`, `traceroute`, `ip rule show`                                                | Добавить/исправить маршруты, обновить конфигурацию сети                            |
| Проблемы с DNS                                       | Медленные отклики, имена не резолвятся                                      | `dig`, `nslookup`, `systemd-resolve --status`, `/etc/resolv.conf`                       | Исправить DNS-серверы, настроить `resolv.conf`, `dnsConfig` (в K8s/Docker)         |
| Зомби-процессы (`Z` state)                           | В `top` процессы со статусом `Z`                                            | `ps -eo pid,ppid,state,comm`, анализ родителя                                           | Исправить код родителя, убить PPID, перезапустить приложение                       |
| Нехватка памяти, активный swap                       | Высокие `si`/`so` в `vmstat`, медленная работа                              | `free -h`, `vmstat 1`, `ps aux --sort=-%mem`                                            | Перезапустить "прожорливый" процесс, увеличить RAM, уменьшить `vm.swappiness`      |
| Ошибки при монтировании файловых систем              | `mount: wrong fs type`, `bad superblock`                                    | `dmesg                                                                                  | tail`,` fsck`,` blkid`                                                             |
| Зависание процесса из-за блокировки файлов           | Процесс “висит”, `D` в `ps`                                                 | `lsof`, `fuser`, `iotop`                                                                | Найти процесс, держащий файл, завершить его, перезапустить сервис                  |
| `SSH` не работает                                    | `Connection timed out` или `refused`                                        | `sshd -t`, `journalctl -u sshd`, `iptables -L`                                          | Проверить конфиг `/etc/ssh/sshd_config`, разрешить порт 22, перезапустить SSH      |
| Проблемы с `systemd` сервисами                       | `Failed to start <service>`                                                 | `systemctl status`, `journalctl -xe`                                                    | Исправить путь к юниту, зависимости, `ExecStart`, перезапустить сервис             |
| Конфликты между `iptables` и `firewalld`             | Правила не применяются                                                      | `systemctl status firewalld`, `iptables -L`                                             | Использовать только один инструмент, очистить старые правила                       |
| Неправильные права на файлы конфигураций             | Сервисы не стартуют, ошибки `Permission denied`                             | `ls -l`, `sudo -u <user> cat <file>`                                                    | Исправить владельца/права `chown`, `chmod`, `restorecon`                           |
| Переполненные логи (`/var/log`)                      | `No space left on device`                                                   | `du -sh /var/log/*`, `journalctl --disk-usage`                                          | Очистка логов, настройка `logrotate`, ограничение `journald`                       |
| Неверные таймзоны или рассинхронизация времени       | Разные временные метки в логах, проблемы с cron                             | `timedatectl`, `ntpq -p`                                                                | Настроить NTP (`chrony`, `systemd-timesyncd`), задать `timedatectl set-timezone`   |
| Сетевые интерфейсы не поднимаются после перезагрузки | Нет IP после reboot                                                         | `ip a`, `systemctl status NetworkManager`, `nmcli`                                      | Проверить конфиг интерфейса, включить `ONBOOT=yes`, обновить `netplan`             |
| Ошибки в `sudo` или отсутствие привилегий            | `user is not in the sudoers file`                                           | `groups`, `visudo`                                                                      | Добавить пользователя в `sudoers`, исправить файл `/etc/sudoers`                   |
